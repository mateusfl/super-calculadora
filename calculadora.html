<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="media.css">
    <title>Calculadora</title>
</head>

<body>
    <header class="header">
        <h1 id="titulo">Calculadora de média</h1>
        <p class="paragrafo">Digite os valores e aperte o botão para calcular a média entre eles.</p>
        <p class="paragrafo">Para adicionar ou retirar números, utilize os botões.</p>
    </header>

    <main class="main">
        <div class="addremover">
            <button id="adicionar">adicionar um número</button>
            <button id="remover">remover um número</button>
        </div>

        <div class="inputs">
            <input type="number" class="numeros">
            <input type="number" class="numeros">
        </div>
        
        <div class="botaoComResultado">
            <button id="botao">calcular</button>
            <p id="resultado"></p>
        </div>

        <div>
            <button id="trocaPagina">
                nova pagina
            </button>
        </div>
    </main>

</body>

<script>
    var botao = document.querySelector('#botao')
    botao.addEventListener('click', calcular)
    
    var botaoAdicionar = document.querySelector('#adicionar')
    botaoAdicionar.addEventListener('click', adicionaNumero)
    
    var botaoRemover = document.querySelector('#remover')
    botaoRemover.addEventListener('click', retiraNumero)

    var caixaResultado = document.querySelector('#resultado')

    var trocaPagina = document.querySelector('#trocaPagina')
    trocaPagina.addEventListener('click', trocaDePagina)

    function trocaDePagina(){
        console.log("aoskdaskdk")
        location.href = "http://127.0.0.1:5500/teste.html"
    }

    function adicionaNumero(){
        var novoInput = document.createElement('input')
        novoInput.className = 'numeros'
        novoInput.type = 'number'
        document.querySelector('.inputs').appendChild(novoInput)
    }
    function retiraNumero(){
        if(document.querySelectorAll('.numeros').length > 2){
            document.querySelector('.inputs').removeChild(document.querySelector('.inputs').lastChild)
        }
        else{
        }
    }

    function calcular(){
        /* cria um array com o tamanho da quantidade de inputs e preenche com undefined */
        var numeros = new Array(document.querySelectorAll('.numeros').length).fill()
        var media = 0

        /* coleta o valor do array de classes numeros, na posição i, transforma em inteiro e guarda no array numeros */
        for (let i = 0; i < numeros.length; i++) {
            numeros[i] = parseFloat(document.querySelectorAll('.numeros')[i].value) 
            media += numeros[i]
        }

        media = media / numeros.length

        if(Number.isNaN(media) == true){
            caixaResultado.innerText = `Por favor, preencha todos os números.`
        }
        else if(Number.isInteger(media) == true){
            caixaResultado.innerText = `O resultado é ${media}`
        }
        else{
            caixaResultado.innerText = `O resultado é ${media.toFixed(3)}`
        }
    }
</script>
</html>